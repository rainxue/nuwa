# 项目代码组织说明
- 业务模块代码目录： `src/nservers/{nserver_name}/`
- 原则上每个业务模块（nserver）下分多个nservice，每个nservice对应一个文件，便于维护和扩展
- 每个文件中一般包含一个业务Dao子类和一个业务Service子类，分别从 nsdk.common.Dao 和 nsdk.common.Service 继承
- nservice中Service子类注册到本模块的 __init__.py 的 __all__ 列表中，便于其他业务模块引用
- 业务模块的Dao子类中，原则上只包含和数据库交互的代码，业务逻辑代码放在Service子类中


# RESTful API 配置说明
原则上nservice的每个公开方法，都需要通过RESTful API暴露出来，便于前端调用。
nservice的RESTful API通过通过配置白名单的方式暴露出来，配置文件路径：`src/nservers/{nserver_name}/restapi.json`。
每个nserver只有一个配置文件，配置文件示例：
```json
[
    {
        "nservice": "CategoryService",
        "base_url": "/sys/categories",
        "items": [
            {
                "is_standard_action": false,
                "action": "query_enabled",
                "method": "GET",
                "url": "/filters/query_enabled"
            }
        ]
    }
]
```

配置文件格式：
```json
[
    {
        "nservice": "string",    // nservice类名
        "base_url": "string",    // 一般是模块名和nservice名的组合，这边的nservice名并非类名，一般采用nserver名的小写复数形式，例如：sys模块的CategoryService类，对应的base_url可以是/sys/categories
        "items": [
            {
                "is_standard_action": "boolean", // 是否是标准动作
                "action": "string",  // nservice类中的方法名，必须是公开方法，且名称必须一致
                "method": "string",  // HTTP方法，GET/POST/PUT/DELETE之一
                "url": "string"      // URL路径，可以为空，非空时 / 开头，且不能包含 base_url 部分，对于查询类的方法，一般采用 /filters/ 开头，对于更新类的方法，一般采用 /{id}/actions/ 开头(单条记录操作) 或 /actions/ 开头(批量操作)
            }
        ]
    }
]
```

标准动作说明：
is_standard_action=true 的动作，表示是标准动作，标准动作包括：
- query: 查询列表
- get: 获取单个对象
- create: 创建对象
- update: 更新对象
- remove: 删除对象

对于标准动作，有默认的method和url映射规则，所以当is_standard_action=true时，去掉method和url，系统会自动映射。
若nserver的类集成自nsdk.common.Service，需要添加那5个标准动作的配置项。